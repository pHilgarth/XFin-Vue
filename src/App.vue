<template>
  <div class="xfin">
    <div class="xfin__header">
      <div class="xfin__logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 445.71568464730296 180.91568464730292" width="445.71568464730296" height="180.91568464730292">
          <rect fill="#222222" width="445.71568464730296" height="180.91568464730292" x="0" y="0"></rect>
          <g fill="white" color="white" transform="translate(276.801 12) scale(1.5691569)">
            <svg width="100.0" height="100.0" x="0.0" y="0.0" viewBox="0 0 100 100">
              <path d="M24,32c-1.7-5.9,0.1-6.8,1.6-6.7c-1.1-3.1-1.1-6.2-0.4-9c0.8-3.3,2.6-6,4.6-8.1c1.3-1.4,2.7-2.5,4.3-3.5  c1.2-0.9,2.6-1.6,4.1-2.1l0,0c1.2-0.4,2.4-0.7,3.8-0.7c4.1-0.4,7.2,0.7,9.4,2c3.3,1.8,4.6,4.3,4.6,4.3s8.4,0.6,4.7,18.2  c1.1,0.4,1.9,1.9,0.6,6.6c-1.6,5.7-3.1,6-4,5.4c-1.1,6.1-4.4,14-15,14.4c-10.8-0.8-14.2-8.9-15.2-15.1C26.4,37.5,25.3,36.3,24,32z   M42.9,85.5h14.7c-0.1-0.5-0.2-0.9-0.2-1.4v-2.5c0-0.8,0.1-1.5,0.4-2.1c-0.3-0.7-0.4-1.4-0.4-2.1v-2.5c0-3.2,2.6-5.8,5.8-5.8h0.7  c1.4-3.1,3.5-5.7,6.2-7.8c0.6-0.5,1.3-0.9,2-1.3c-0.7-0.4-1.4-0.7-2.3-1c-8.9-3.4-14.2-6.9-14.2-6.9l-6.8,21.6l-0.9,2.9l-3.1-8.7  c7-9.8-0.5-10.3-1.8-10.3v0c0,0,0,0,0,0c0,0,0,0,0,0s0,0,0,0c0,0,0,0,0,0v0c-1.3,0-8.9,0.5-1.8,10.3l-3.1,8.7L37,73.5l-6.8-21.6  c0,0-5.3,3.5-14.2,6.9c-9.8,3.6-9.2,11.6-9.4,26.7H42.9L42.9,85.5z M63.2,80.4c-0.6,0-1.1,0.5-1.1,1.1V84c0,0.6,0.5,1.1,1.1,1.1h3.7  c0.3,0.9,0.5,1.8,0.9,2.7c1.9,4.5,5,7.8,9.8,9.3c3.9,1.3,7.9,1.2,11.9,0.1c1-0.3,2.1-0.7,3-1.1c0.9-0.4,1.2-1.2,0.8-2.1  c-0.4-1-0.8-2-1.3-3c-0.4-0.9-0.9-1.1-1.9-0.9c-1.2,0.3-2.4,0.7-3.7,0.9c-2.4,0.5-4.8,0.5-7.1-0.2c-2.9-0.9-4.5-3.1-5.5-5.8h8  c0.6,0,1.1-0.5,1.1-1.1v-2.5c0-0.6-0.5-1.1-1.1-1.1h-8.7c0-0.7,0-1.4,0-2h8.7c0.6,0,1.1-0.5,1.1-1.1v-2.5c0-0.6-0.5-1.1-1.1-1.1  h-7.6c0,0,0-0.1,0-0.1c0.9-2.1,2.3-3.8,4.4-4.6c2.5-1,5.2-1,7.8-0.4c1.2,0.3,2.5,0.6,3.7,0.9c0.9,0.2,1.4-0.1,1.8-0.9  c0.5-1,0.9-2,1.3-3c0.4-0.9,0.2-1.6-0.7-2.1c-0.2-0.1-0.5-0.2-0.7-0.3c-3.7-1.4-7.5-2-11.4-1.3c-2.8,0.4-5.3,1.4-7.5,3.1  c-2.8,2.2-4.6,5-5.7,8.4l-0.1,0.4h-3.9c-0.6,0-1.1,0.5-1.1,1.1v2.5c0,0.6,0.5,1.1,1.1,1.1h3.1c0,0.7,0,1.4,0,2H63.2z"></path>
            </svg>
          </g>
          <path fill="white" fill-rule="nonzero" d="M4.64 27.84L0.16 27.84Q0 27.84 0.04 27.64L0.04 27.64L4.60 13.36L0.12 0.16Q0.08 0 0.24 0L0.24 0L4.72 0Q4.92 0 4.96 0.16L4.96 0.16L7.64 9.68L10.36 0.16Q10.40 0 10.60 0L10.60 0L15.04 0Q15.20 0 15.16 0.16L15.16 0.16L10.68 13.32L15.20 27.64Q15.28 27.84 15.08 27.84L15.08 27.84L10.60 27.84Q10.44 27.84 10.36 27.64L10.36 27.64L7.64 17.32L4.88 27.64Q4.84 27.84 4.64 27.84L4.64 27.84ZM22.24 27.84L17.76 27.84Q17.56 27.84 17.56 27.64L17.56 27.64L17.64 0.16Q17.64 0 17.80 0L17.80 0L30.60 0Q30.80 0 30.80 0.16L30.80 0.16L30.80 4.68Q30.80 4.84 30.64 4.84L30.64 4.84L22.44 4.84L22.44 11.04L30.64 11.04Q30.80 11.04 30.80 11.24L30.80 11.24L30.84 15.76Q30.84 15.92 30.64 15.92L30.64 15.92L22.44 15.92L22.44 27.64Q22.44 27.84 22.24 27.84L22.24 27.84ZM39.12 27.84L34.60 27.84Q34.40 27.84 34.40 27.64L34.40 27.64L34.44 0.16Q34.44 0 34.60 0L34.60 0L39.08 0Q39.24 0 39.24 0.16L39.24 0.16L39.28 27.64Q39.28 27.84 39.12 27.84L39.12 27.84ZM47.16 27.84L43.16 27.84Q42.84 27.84 42.84 27.56L42.84 27.56L42.80 0.32Q42.80 0 43.12 0L43.12 0L46.72 0L53.48 15.76L53.28 0.32Q53.28 0 53.64 0L53.64 0L57.60 0Q57.84 0 57.84 0.32L57.84 0.32L57.88 27.60Q57.88 27.84 57.68 27.84L57.68 27.84L54.16 27.84L47.24 13.12L47.52 27.52Q47.52 27.84 47.16 27.84L47.16 27.84Z" transform="translate(12 12) scale(4.319)"></path>
          <path fill="white" fill-rule="nonzero" d="M0 28.08L0 28.08L4.96 0.60Q5 0.44 5.16 0.44L5.16 0.44L10.96 0.44Q11.12 0.44 11.16 0.60L11.16 0.60L15.92 28.08Q15.96 28.28 15.76 28.28L15.76 28.28L11.32 28.28Q11.16 28.28 11.12 28.08L11.12 28.08L10.68 25.16L5.24 25.16L4.80 28.08Q4.76 28.28 4.60 28.28L4.60 28.28L0.16 28.28Q0 28.28 0 28.08ZM7.84 9.64L6.04 20.88L9.88 20.88L8.24 9.64L8 8.16L7.84 9.64ZM25.00 28.68L25.00 28.68Q22.80 28.68 21.02 27.58Q19.24 26.48 18.20 24.64Q17.16 22.80 17.16 20.52L17.16 20.52L17.20 8.04Q17.20 5.84 18.22 4.02Q19.24 2.20 21.02 1.10Q22.80 0 25.00 0L25.00 0Q27.20 0 28.96 1.08Q30.72 2.16 31.76 3.98Q32.80 5.80 32.80 8.04L32.80 8.04L32.80 9.88Q32.80 10.04 32.64 10.04L32.64 10.04L28.16 10.04Q28.00 10.04 28.00 9.88L28.00 9.88L28.00 8.04Q28.00 6.72 27.14 5.76Q26.28 4.80 25.00 4.80L25.00 4.80Q23.56 4.80 22.80 5.78Q22.04 6.76 22.04 8.04L22.04 8.04L22.04 20.52Q22.04 22 22.90 22.92Q23.76 23.84 25.00 23.84L25.00 23.84Q26.28 23.84 27.14 22.82Q28.00 21.80 28.00 20.52L28.00 20.52L28.00 18.68Q28.00 18.52 28.16 18.52L28.16 18.52L32.68 18.52Q32.84 18.52 32.84 18.68L32.84 18.68L32.84 20.52Q32.84 22.80 31.78 24.64Q30.72 26.48 28.96 27.58Q27.20 28.68 25.00 28.68ZM43.12 28.68L43.12 28.68Q40.92 28.68 39.14 27.58Q37.36 26.48 36.32 24.64Q35.28 22.80 35.28 20.52L35.28 20.52L35.32 8.04Q35.32 5.84 36.34 4.02Q37.36 2.20 39.14 1.10Q40.92 0 43.12 0L43.12 0Q45.32 0 47.08 1.08Q48.84 2.16 49.88 3.98Q50.92 5.80 50.92 8.04L50.92 8.04L50.92 9.88Q50.92 10.04 50.76 10.04L50.76 10.04L46.28 10.04Q46.12 10.04 46.12 9.88L46.12 9.88L46.12 8.04Q46.12 6.72 45.26 5.76Q44.40 4.80 43.12 4.80L43.12 4.80Q41.68 4.80 40.92 5.78Q40.16 6.76 40.16 8.04L40.16 8.04L40.16 20.52Q40.16 22 41.02 22.92Q41.88 23.84 43.12 23.84L43.12 23.84Q44.40 23.84 45.26 22.82Q46.12 21.80 46.12 20.52L46.12 20.52L46.12 18.68Q46.12 18.52 46.28 18.52L46.28 18.52L50.80 18.52Q50.96 18.52 50.96 18.68L50.96 18.68L50.96 20.52Q50.96 22.80 49.90 24.64Q48.84 26.48 47.08 27.58Q45.32 28.68 43.12 28.68ZM61.28 28.68L61.28 28.68Q59.12 28.68 57.34 27.58Q55.56 26.48 54.48 24.66Q53.40 22.84 53.40 20.64L53.40 20.64L53.44 7.96Q53.44 5.76 54.50 3.96Q55.56 2.16 57.36 1.08Q59.16 0 61.28 0L61.28 0Q63.44 0 65.20 1.08Q66.96 2.16 68.02 3.96Q69.08 5.76 69.08 7.96L69.08 7.96L69.12 20.64Q69.12 22.84 68.06 24.66Q67 26.48 65.22 27.58Q63.44 28.68 61.28 28.68ZM61.28 23.84L61.28 23.84Q62.48 23.84 63.38 22.86Q64.28 21.88 64.28 20.64L64.28 20.64L64.24 7.96Q64.24 6.64 63.40 5.72Q62.56 4.80 61.28 4.80L61.28 4.80Q60.04 4.80 59.16 5.70Q58.28 6.60 58.28 7.96L58.28 7.96L58.28 20.64Q58.28 21.96 59.16 22.90Q60.04 23.84 61.28 23.84ZM79.76 28.68L79.76 28.68Q77.64 28.68 75.84 27.58Q74.04 26.48 72.98 24.64Q71.92 22.80 71.92 20.60L71.92 20.60L72 0.60Q72 0.44 72.16 0.44L72.16 0.44L76.64 0.44Q76.80 0.44 76.80 0.60L76.80 0.60L76.80 20.60Q76.80 21.96 77.66 22.90Q78.52 23.84 79.76 23.84L79.76 23.84Q81.04 23.84 81.90 22.90Q82.76 21.96 82.76 20.60L82.76 20.60L82.76 0.60Q82.76 0.44 82.92 0.44L82.92 0.44L87.40 0.44Q87.56 0.44 87.56 0.60L87.56 0.60L87.64 20.60Q87.64 22.84 86.58 24.68Q85.52 26.52 83.74 27.60Q81.96 28.68 79.76 28.68ZM95.16 28.28L91.16 28.28Q90.84 28.28 90.84 28L90.84 28L90.80 0.76Q90.80 0.44 91.12 0.44L91.12 0.44L94.72 0.44L101.48 16.20L101.28 0.76Q101.28 0.44 101.64 0.44L101.64 0.44L105.60 0.44Q105.84 0.44 105.84 0.76L105.84 0.76L105.88 28.04Q105.88 28.28 105.68 28.28L105.68 28.28L102.16 28.28L95.24 13.56L95.52 27.96Q95.52 28.28 95.16 28.28L95.16 28.28ZM117.88 28.28L113.36 28.28Q113.20 28.28 113.20 28.08L113.20 28.08L113.20 5.28L108 5.28Q107.80 5.28 107.80 5.08L107.80 5.08L107.84 0.60Q107.84 0.44 108 0.44L108 0.44L123.20 0.44Q123.40 0.44 123.40 0.60L123.40 0.60L123.40 5.08Q123.40 5.28 123.24 5.28L123.24 5.28L118 5.28L118.04 28.08Q118.04 28.28 117.88 28.28L117.88 28.28ZM130.04 28.28L125.52 28.28Q125.36 28.28 125.36 28.08L125.36 28.08L125.44 0.60Q125.44 0.44 125.60 0.44L125.60 0.44L130.48 0.44Q130.64 0.44 130.76 0.60L130.76 0.60L134.40 5.88L138.04 0.60Q138.16 0.44 138.32 0.44L138.32 0.44L143.24 0.44Q143.40 0.44 143.40 0.60L143.40 0.60L143.48 28.08Q143.48 28.28 143.32 28.28L143.32 28.28L138.80 28.28Q138.64 28.28 138.64 28.08L138.64 28.08L138.60 7.68L134.40 13.76L130.24 7.68L130.20 28.08Q130.20 28.28 130.04 28.28L130.04 28.28ZM145.48 28.08L145.48 28.08L150.44 0.60Q150.48 0.44 150.64 0.44L150.64 0.44L156.44 0.44Q156.60 0.44 156.64 0.60L156.64 0.60L161.40 28.08Q161.44 28.28 161.24 28.28L161.24 28.28L156.80 28.28Q156.64 28.28 156.60 28.08L156.60 28.08L156.16 25.16L150.72 25.16L150.28 28.08Q150.24 28.28 150.08 28.28L150.08 28.28L145.64 28.28Q145.48 28.28 145.48 28.08ZM153.32 9.64L151.52 20.88L155.36 20.88L153.72 9.64L153.48 8.16L153.32 9.64ZM168.28 28.28L164.28 28.28Q163.96 28.28 163.96 28L163.96 28L163.92 0.76Q163.92 0.44 164.24 0.44L164.24 0.44L167.84 0.44L174.60 16.20L174.40 0.76Q174.40 0.44 174.76 0.44L174.76 0.44L178.72 0.44Q178.96 0.44 178.96 0.76L178.96 0.76L179.00 28.04Q179.00 28.28 178.80 28.28L178.80 28.28L175.28 28.28L168.36 13.56L168.64 27.96Q168.64 28.28 168.28 28.28L168.28 28.28ZM181.12 28.08L181.12 28.08L186.08 0.60Q186.12 0.44 186.28 0.44L186.28 0.44L192.08 0.44Q192.24 0.44 192.28 0.60L192.28 0.60L197.04 28.08Q197.08 28.28 196.88 28.28L196.88 28.28L192.44 28.28Q192.28 28.28 192.24 28.08L192.24 28.08L191.80 25.16L186.36 25.16L185.92 28.08Q185.88 28.28 185.72 28.28L185.72 28.28L181.28 28.28Q181.12 28.28 181.12 28.08ZM188.96 9.64L187.16 20.88L191.00 20.88L189.36 9.64L189.12 8.16L188.96 9.64ZM206.04 28.68L206.04 28.68Q203.88 28.68 202.12 27.60Q200.36 26.52 199.30 24.70Q198.24 22.88 198.24 20.64L198.24 20.64L198.24 7.96Q198.24 5.80 199.30 3.98Q200.36 2.16 202.14 1.08Q203.92 0 206.04 0L206.04 0Q208.24 0 210.02 1.06Q211.80 2.12 212.84 3.92Q213.88 5.72 213.88 7.96L213.88 7.96L213.88 9.80Q213.88 9.96 213.68 9.96L213.68 9.96L209.20 9.96Q209.04 9.96 209.04 9.80L209.04 9.80L209.04 8.28Q209.04 6.76 208.18 5.76Q207.32 4.76 206.04 4.76L206.04 4.76Q204.88 4.76 203.98 5.72Q203.08 6.68 203.08 7.96L203.08 7.96L203.08 20.64Q203.08 21.96 203.96 22.90Q204.84 23.84 206.04 23.84L206.04 23.84Q207.32 23.84 208.18 22.92Q209.04 22 209.04 20.64L209.04 20.64L209.04 18.68L206.24 18.68Q206.04 18.68 206.04 18.48L206.04 18.48L206.04 14Q206.04 13.80 206.24 13.80L206.24 13.80L213.72 13.80Q213.88 13.80 213.88 14L213.88 14L213.88 20.64Q213.88 22.88 212.82 24.70Q211.76 26.52 210.00 27.60Q208.24 28.68 206.04 28.68ZM229.80 28.28L216.88 28.28Q216.72 28.28 216.72 28.08L216.72 28.08L216.76 0.60Q216.76 0.44 216.92 0.44L216.92 0.44L229.76 0.44Q229.92 0.44 229.92 0.64L229.92 0.64L229.92 5.12Q229.92 5.28 229.76 5.28L229.76 5.28L221.56 5.28L221.56 11.52L229.76 11.52Q229.92 11.52 229.92 11.68L229.92 11.68L229.96 16.20Q229.96 16.36 229.80 16.36L229.80 16.36L221.56 16.36L221.56 23.36L229.80 23.36Q229.96 23.36 229.96 23.56L229.96 23.56L229.96 28.12Q229.96 28.28 229.80 28.28L229.80 28.28ZM238.20 28.28L233.68 28.28Q233.52 28.28 233.52 28.08L233.52 28.08L233.60 0.60Q233.60 0.44 233.76 0.44L233.76 0.44L241.84 0.44Q244.00 0.44 245.82 1.50Q247.64 2.56 248.72 4.34Q249.80 6.12 249.80 8.36L249.80 8.36Q249.80 9.84 249.36 11.02Q248.92 12.20 248.32 13.02Q247.72 13.84 247.24 14.24L247.24 14.24Q249.40 16.64 249.40 19.88L249.40 19.88L249.44 28.08Q249.44 28.28 249.24 28.28L249.24 28.28L244.72 28.28Q244.56 28.28 244.56 28.16L244.56 28.16L244.56 19.88Q244.56 18.44 243.54 17.38Q242.52 16.32 241.04 16.32L241.04 16.32L238.40 16.32L238.36 28.08Q238.36 28.28 238.20 28.28L238.20 28.28ZM238.40 5.24L238.40 11.52L241.84 11.52Q243.08 11.52 244.04 10.60Q245.00 9.68 245.00 8.36L245.00 8.36Q245.00 7.08 244.06 6.16Q243.12 5.24 241.84 5.24L241.84 5.24L238.40 5.24Z" transform="translate(12 140.236) scale(1)"></path>
        </svg>
      </div>
    </div>
    <div v-if="user" class="xfin__body">
      <div class="xfin__sidebar">
        <ul class="xfin__menu">
          <li id="account-view" :class="selectedMenuItem === 0 ? 'active' : ''">
            <a href="/">Kontenübersicht</a>
          </li>
          <li id="transaction" :class="selectedMenuItem === 1 ? 'active' : ''">
            <a href="/transaction">Transaktion</a>
          </li>
          <li id="budget-manager" :class="selectedMenuItem === 2 ? 'active' : ''">
            <a href="/budget-manager">Budgetmanager</a>
          </li>
          <li id="overheads-manager" :class="selectedMenuItem === 3 ? 'active' : ''">
            <a href="/overheads-manager">Fixkosten</a>
          </li>
          <li id="cost-centers" :class="selectedMenuItem === 4 ? 'active' : ''">
            <a href="/cost-centers">Kostenstellenverwaltung</a>
          </li>
          <li id="reserves" :class="selectedMenuItem === 5 ? 'active' : ''">
            <a href="/reserves">Rücklagen</a>
          </li>
          <li id="debt-manager" :class="selectedMenuItem === 6 ? 'active' : ''">
            <a href="/debt-manager">Schuldenmanager</a>
          </li>
          <li id="design-elements" :class="selectedMenuItem === 7 ? 'active' : ''">
            <a href="/design-elements">Design-Elemente (Dev)</a>
          </li>
        </ul>
      </div>
      <div class="xfin__content">
        <div class="xfin__component">
          <router-view :key="$route.path"></router-view>
        </div>
      </div>
    </div>
    <OrganismFakeLogin v-else @login="login" />
  </div>
</template>

<script>
import OrganismFakeLogin from '@/components/organisms/OrganismFakeLogin'

export default {
  created() {
    if (this.$cookies.get('user')) {
      this.user = this.$cookies.get('user');
    }
  },

  updated() {
    const indexRoutePath = this.menuItems.indexOf(this.$route.path.substring(1));
    this.selectedMenuItem = indexRoutePath === -1 ? 0 : indexRoutePath;
  },

  components: {
    OrganismFakeLogin,
  },

  provide() {
    //TODO - implement proper login with authentication, then somehow pass the userId to everyComponent
    return {
      userId: 1,//this.user?.id,
    }
  },

  data() {
    return {
      selectedMenuItem: 1,
      menuItems: [
          'account-view',
          'transaction',
          'budget-manager',
          'overheads-manager',
          'cost-centers',
          'reserves',
          'debt-manager',
          'design-elements',
      ],
      user: null,
      test: 'hi',
    };
  },

  methods: {
    //TODO - implement proper login with authentication
    login(user) {
      this.user = user;
      this.$cookies.set('user', user, '', '', 'localhost', '', '')
    },

    routeToComponent(event) {
      this.selectedMenuItem = event.target.dataset.index;
      this.$router.push(event.target.dataset.route);
    }
  }
}
</script>
<style lang="scss">
  @import "../public/styles/styles";
</style>
